<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MechanicsDSL - Interactive Physics Playground</title>
    <link rel="stylesheet" href="./css/style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚öõÔ∏è</text></svg>">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
</head>

<body>
    <!-- Hero Section -->
    <header class="hero">
        <nav class="navbar">
            <div class="logo">
                <span class="logo-icon">‚öõÔ∏è</span>
                <span class="logo-text">MechanicsDSL</span>
            </div>
            <div class="nav-links">
                <a href="#playground">Playground</a>
                <a href="#examples">Examples</a>
                <a href="#features">Features</a>
                <button class="theme-toggle" id="theme-toggle" title="Toggle Theme">üåô</button>
                <a href="https://github.com/MechanicsDSL/mechanicsdsl" target="_blank" class="github-link">
                    <svg height="20" viewBox="0 0 16 16" width="20" fill="currentColor">
                        <path
                            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z" />
                    </svg>
                    GitHub
                </a>
            </div>
        </nav>

        <div class="hero-content">
            <div class="hero-badge">v1.3.0 ‚Äî Now with 12 Code Generators</div>
            <h1 class="hero-title">
                <span class="gradient-text">Physics Simulation</span>
                <br>Made Simple
            </h1>
            <p class="hero-subtitle">
                A domain-specific language for classical mechanics. Write physics in natural notation,
                simulate in real-time, export to C++, CUDA, Rust, and more.
            </p>
            <div class="hero-cta">
                <a href="#playground" class="btn btn-primary">Try It Now</a>
                <a href="#examples" class="btn btn-secondary">See Examples</a>
            </div>
        </div>

        <div class="hero-visual">
            <canvas id="hero-canvas"></canvas>
        </div>

        <div class="scroll-indicator">
            <span>Scroll to explore</span>
            <div class="scroll-arrow"></div>
        </div>
    </header>

    <!-- Stats Bar -->
    <section class="stats-bar">
        <div class="stat">
            <span class="stat-number">12</span>
            <span class="stat-label">Code Generators</span>
        </div>
        <div class="stat">
            <span class="stat-number">73+</span>
            <span class="stat-label">Test Coverage</span>
        </div>
        <div class="stat">
            <span class="stat-number">10x</span>
            <span class="stat-label">Numba Speedup</span>
        </div>
        <div class="stat">
            <span class="stat-number">GPU</span>
            <span class="stat-label">CUDA Support</span>
        </div>
    </section>

    <!-- Interactive Playground -->
    <section id="playground" class="playground-section">
        <div class="section-header">
            <h2>Interactive Playground</h2>
            <p>Write physics equations and watch them come to life</p>
        </div>

        <div class="playground-container">
            <div class="editor-panel">
                <div class="panel-header">
                    <div class="panel-title">
                        <span class="file-icon">üìù</span>
                        simulation.mdsl
                    </div>
                    <div class="panel-actions">
                        <button class="action-btn mode-toggle" id="python-mode-btn"
                            title="Toggle Python Mode (uses real SciPy)">
                            <span>üêç</span> Python
                        </button>
                        <button class="action-btn" id="run-btn" title="Run Simulation">
                            <span class="play-icon">‚ñ∂</span> Run
                        </button>
                        <button class="action-btn" id="reset-btn" title="Reset">‚Üª</button>
                    </div>
                </div>
                <div class="code-editor">
                    <div class="line-numbers" id="line-numbers"></div>
                    <textarea id="code-input" spellcheck="false">\system{double_pendulum}

% Physical parameters
\parameter{m1}{1.0}{kg}
\parameter{m2}{1.0}{kg}
\parameter{l1}{1.0}{m}
\parameter{l2}{1.0}{m}
\parameter{g}{9.81}{m/s^2}

% Generalized coordinates
\defvar{theta1}{angle1}{rad}
\defvar{theta2}{angle2}{rad}

% Lagrangian
\lagrangian{
  \frac{1}{2}(m1+m2)l1^2\dot{\theta1}^2 
  + \frac{1}{2}m2 l2^2\dot{\theta2}^2
  + m2 l1 l2 \dot{\theta1}\dot{\theta2}\cos(\theta1-\theta2)
  - (m1+m2)g l1(1-\cos\theta1) 
  - m2 g l2(1-\cos\theta2)
}

% Initial conditions
\initial{theta1=2.5, theta2=2.0}
\initial{theta1_dot=0, theta2_dot=0}</textarea>
                </div>

                <!-- Parameter Sliders -->
                <div class="parameter-panel">
                    <div class="panel-header">
                        <div class="panel-title">
                            <span class="file-icon">üéöÔ∏è</span>
                            Parameters
                        </div>
                    </div>
                    <div class="sliders-container">
                        <div class="slider-group">
                            <label>Gravity: <span id="gravity-value">9.81</span> m/s¬≤</label>
                            <input type="range" id="gravity-slider" min="0" max="20" step="0.1" value="9.81">
                        </div>
                        <div class="slider-group">
                            <label>Mass 1: <span id="m1-value">1.0</span> kg</label>
                            <input type="range" id="m1-slider" min="0.1" max="5" step="0.1" value="1.0">
                        </div>
                        <div class="slider-group">
                            <label>Mass 2: <span id="m2-value">1.0</span> kg</label>
                            <input type="range" id="m2-slider" min="0.1" max="5" step="0.1" value="1.0">
                        </div>
                        <div class="slider-group">
                            <label>Length 1: <span id="l1-value">1.0</span> m</label>
                            <input type="range" id="l1-slider" min="0.5" max="2" step="0.1" value="1.0">
                        </div>
                    </div>
                </div>
            </div>

            <div class="visualization-column">
                <div class="visualization-panel">
                    <div class="panel-header">
                        <div class="panel-title">
                            <span class="file-icon">üé¨</span>
                            Visualization
                        </div>
                        <div class="sim-controls">
                            <button class="control-btn" id="compare-btn" title="Compare Mode">‚öñÔ∏è</button>
                            <button class="control-btn" id="3d-btn" title="3D View">üéÆ</button>
                            <button class="control-btn" id="pause-btn" title="Pause">‚è∏</button>
                            <button class="control-btn" id="slow-btn" title="Slow Motion">üê¢</button>
                            <button class="control-btn active" id="normal-btn" title="Normal Speed">1x</button>
                            <button class="control-btn" id="fast-btn" title="Fast">üêá</button>
                        </div>
                    </div>
                    <div class="canvas-wrapper">
                        <canvas id="sim-canvas"></canvas>
                        <div id="three-container" class="three-container hidden"></div>
                        <div class="canvas-overlay" id="canvas-overlay">
                            <span>Click Run to start simulation</span>
                        </div>
                    </div>
                    <div class="sim-info">
                        <div class="info-item">
                            <span class="info-label">Time</span>
                            <span class="info-value" id="sim-time">0.00 s</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Energy</span>
                            <span class="info-value" id="sim-energy">0.00 J</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">FPS</span>
                            <span class="info-value" id="sim-fps">60</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Energy Error</span>
                            <span class="info-value" id="energy-error">0.00%</span>
                        </div>
                    </div>
                </div>

                <!-- Phase Portrait -->
                <div class="phase-panel">
                    <div class="panel-header">
                        <div class="panel-title">
                            <span class="file-icon">üìä</span>
                            Phase Portrait
                        </div>
                    </div>
                    <div class="phase-wrapper">
                        <canvas id="phase-canvas"></canvas>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-bar">
                    <button class="action-btn secondary" id="share-btn">
                        <span>üîó</span> Share
                    </button>
                    <button class="action-btn secondary" id="download-csv-btn">
                        <span>üìä</span> CSV
                    </button>
                    <button class="action-btn secondary" id="download-gif-btn">
                        <span>üé¨</span> GIF
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Examples Gallery -->
    <section id="examples" class="examples-section">
        <div class="section-header">
            <h2>Example Gallery</h2>
            <p>Click any example to load it into the playground</p>
        </div>

        <div class="examples-grid">
            <div class="example-card" data-example="pendulum">
                <div class="example-preview" id="preview-pendulum"></div>
                <div class="example-info">
                    <h3>Simple Pendulum</h3>
                    <p>Classic harmonic motion</p>
                    <span class="difficulty easy">Beginner</span>
                </div>
            </div>

            <div class="example-card active" data-example="double-pendulum">
                <div class="example-preview" id="preview-double"></div>
                <div class="example-info">
                    <h3>Double Pendulum</h3>
                    <p>Chaotic dynamics</p>
                    <span class="difficulty medium">Intermediate</span>
                </div>
            </div>

            <div class="example-card" data-example="spring">
                <div class="example-preview" id="preview-spring"></div>
                <div class="example-info">
                    <h3>Spring Oscillator</h3>
                    <p>Damped harmonic motion</p>
                    <span class="difficulty easy">Beginner</span>
                </div>
            </div>

            <div class="example-card" data-example="orbital">
                <div class="example-preview" id="preview-orbital"></div>
                <div class="example-info">
                    <h3>Orbital Mechanics</h3>
                    <p>Kepler orbits</p>
                    <span class="difficulty hard">Advanced</span>
                </div>
            </div>

            <div class="example-card" data-example="rigid-body">
                <div class="example-preview" id="preview-rigid"></div>
                <div class="example-info">
                    <h3>Rigid Body</h3>
                    <p>Quaternion dynamics</p>
                    <span class="difficulty hard">Advanced</span>
                </div>
            </div>

            <div class="example-card" data-example="sph">
                <div class="example-preview" id="preview-sph"></div>
                <div class="example-info">
                    <h3>Fluid (SPH)</h3>
                    <p>Dam break simulation</p>
                    <span class="difficulty hard">Advanced</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="features-section">
        <div class="section-header">
            <h2>Powerful Features</h2>
            <p>Everything you need for computational mechanics</p>
        </div>

        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">üìê</div>
                <h3>Symbolic Derivation</h3>
                <p>Automatic Euler-Lagrange and Hamilton's equations from your Lagrangian or Hamiltonian.</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">‚ö°</div>
                <h3>GPU Acceleration</h3>
                <p>Generate CUDA kernels for massive parallelism. 50x speedup on particle simulations.</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">üîÑ</div>
                <h3>12 Backends</h3>
                <p>Export to C++, Python, Rust, Julia, MATLAB, Fortran, JavaScript, CUDA, OpenMP, WASM, and Arduino.</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">üíß</div>
                <h3>Fluid Dynamics</h3>
                <p>SPH implementation with viscosity, pressure, surface tension, and boundary conditions.</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">üéØ</div>
                <h3>Quaternion Mechanics</h3>
                <p>Singularity-free rigid body dynamics for spacecraft, robotics, and games.</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">üìä</div>
                <h3>Visualization</h3>
                <p>Phase portraits, Poincar√© sections, energy plots, and 3D animations.</p>
            </div>
        </div>
    </section>

    <!-- Code Export Section -->
    <section class="export-section">
        <div class="section-header">
            <h2>Export Anywhere</h2>
            <p>Generate production-ready code for any platform</p>
        </div>

        <div class="export-tabs">
            <button class="export-tab active" data-lang="cpp">C++</button>
            <button class="export-tab" data-lang="python">Python</button>
            <button class="export-tab" data-lang="cuda">CUDA</button>
            <button class="export-tab" data-lang="rust">Rust</button>
            <button class="export-tab" data-lang="julia">Julia</button>
        </div>

        <div class="export-code">
            <pre id="export-preview"><code>// Generated C++ code for simple pendulum
#include &lt;cmath&gt;
#include &lt;vector&gt;

const double g = 9.81;
const double l = 1.0;

void compute_derivatives(const double* y, double* dydt, double t) {
    double theta = y[0];
    double theta_dot = y[1];
    
    dydt[0] = theta_dot;
    dydt[1] = -g/l * sin(theta);
}

void rk4_step(double* y, double t, double dt) {
    // ... RK4 integration
}</code></pre>
            <button class="copy-btn" id="copy-code">
                <span>üìã</span> Copy Code
            </button>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section">
        <div class="cta-content">
            <h2>Ready to simulate physics?</h2>
            <p>Install MechanicsDSL and start building simulations in minutes.</p>
            <div class="install-command">
                <code>pip install mechanicsdsl-core</code>
                <button class="copy-btn" id="copy-install"></button>
            </div>
            <div class="cta-buttons">
                <a href="https://github.com/MechanicsDSL/mechanicsdsl" class="btn btn-primary">View on GitHub</a>
                <a href="https://mechanicsdsl.readthedocs.io" class="btn btn-secondary">Documentation</a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-brand">
                <span class="logo-icon">‚öõÔ∏è</span>
                <span>MechanicsDSL</span>
            </div>
            <div class="footer-links">
                <a href="https://github.com/MechanicsDSL/mechanicsdsl">GitHub</a>
                <a href="https://mechanicsdsl.readthedocs.io">Docs</a>
                <a href="https://github.com/MechanicsDSL/mechanicsdsl/issues">Issues</a>
            </div>
            <div class="footer-copyright">
                MIT License ‚Ä¢ Made with ‚ù§Ô∏è for physics
            </div>
        </div>
    </footer>

    <!-- Share Modal -->
    <div class="modal" id="share-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Share Simulation</h3>
                <button class="modal-close" id="close-modal">√ó</button>
            </div>
            <div class="modal-body">
                <p>Copy this URL to share your simulation:</p>
                <div class="share-url-container">
                    <input type="text" id="share-url" readonly>
                    <button class="copy-btn" id="copy-share-url">üìã</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <script src="./js/physics.js"></script>
    <script src="./js/pyodide-bridge.js"></script>
    <script src="./js/examples.js"></script>
    <script src="./js/app.js"></script>
</body>


</html>
